---
title: 'CLI Plugins'
description: 'Extending the Zopio CLI with custom plugins'
icon: 'puzzle-piece'
---

# Plugin System

The Zopio CLI includes a powerful plugin system that allows you to extend its functionality with custom commands and features. This guide explains how to use and develop plugins for the CLI.

## Using Plugins

### Listing Installed Plugins

To see which plugins are currently installed:

```bash
zopio plugins --list
```

This command displays all installed plugins and the number of commands each plugin provides.

### Installing Plugins

While the automatic plugin installation is under development, you can manually install plugins by placing them in one of these directories:

- Project-specific: `<project>/.zopio/plugins/`
- User-specific: `$HOME/.zopio/plugins/`

The CLI automatically loads plugins from these locations when it starts.

## Plugin Locations

Plugins can be installed in three locations, listed in order of precedence:

1. **Project-specific plugins**: `<project>/.zopio/plugins/`
   - These plugins are only available within the specific project
   - Ideal for project-specific commands and workflows

2. **User-specific plugins**: `$HOME/.zopio/plugins/`
   - These plugins are available across all projects for the current user
   - Good for personal workflow customizations

3. **Built-in plugins**: `<cli-directory>/plugins/`
   - These plugins come bundled with the CLI
   - Provide additional functionality for common tasks

## Creating Custom Plugins

A Zopio CLI plugin is a JavaScript module that exports a default function which returns an array of commander Command objects.

### Basic Plugin Structure

```javascript
import { Command } from 'commander';

export default function initPlugin() {
  // Create a new command
  const exampleCommand = new Command('example')
    .description('Example command')
    .option('-o, --option <value>', 'An example option')
    .action((options) => {
      console.log('Example command executed with options:', options);
    });
  
  // Return an array of commands provided by this plugin
  return [exampleCommand];
}
```

### Example: Creating an i18n Plugin

Here's a more complete example of a plugin that adds internationalization-related commands:

```javascript
import { Command } from 'commander';
import fs from 'node:fs';
import path from 'node:path';

export default function initPlugin() {
  // Command to check translation status
  const statusCommand = new Command('i18n-status')
    .description('Check the status of translations')
    .option('-l, --locale <locale>', 'Specific locale to check')
    .action((options) => {
      const locale = options.locale || 'all';
      console.log(`Checking translation status for ${locale}...`);
      
      // Implementation would go here
    });
  
  // Command to export translations
  const exportCommand = new Command('i18n-export')
    .description('Export translations to CSV')
    .option('-o, --output <file>', 'Output file', 'translations.csv')
    .action((options) => {
      console.log(`Exporting translations to ${options.output}...`);
      
      // Implementation would go here
    });
  
  // Return all commands provided by this plugin
  return [statusCommand, exportCommand];
}
```

### Plugin Best Practices

1. **Single Responsibility**: Each plugin should focus on a specific area of functionality
2. **Clear Naming**: Use descriptive names for your plugins and commands
3. **Helpful Documentation**: Include detailed help text for all commands and options
4. **Error Handling**: Gracefully handle errors and provide useful error messages
5. **Configuration**: Allow users to configure your plugin's behavior when appropriate

## Advanced Plugin Features

### Accessing CLI Utilities

Plugins can import and use the CLI's utility functions:

```javascript
import { logger, getI18nConfig } from '../utils/helpers.js';

export default function initPlugin() {
  const command = new Command('example')
    .action(() => {
      // Use the logger utility
      logger.info('This is an informational message');
      
      // Access i18n configuration
      const i18nConfig = getI18nConfig();
      logger.info(`Default locale: ${i18nConfig.defaultLocale}`);
    });
  
  return [command];
}
```

### Plugin Dependencies

If your plugin depends on external packages, you should document these dependencies in your plugin's README file. Users will need to install these dependencies manually.

### Plugin Configuration

Plugins can store configuration in the project's `zopio.config.js` file under a plugin-specific key:

```javascript
// zopio.config.js
export default {
  // Project configuration
  project: { /* ... */ },
  
  // Plugin configuration
  plugins: {
    'my-plugin': {
      option1: 'value1',
      option2: 'value2'
    }
  }
};
```

Then access this configuration in your plugin:

```javascript
import path from 'node:path';
import fs from 'node:fs';

function getPluginConfig() {
  const configPath = path.join(process.cwd(), 'zopio.config.js');
  if (fs.existsSync(configPath)) {
    try {
      const config = require(configPath);
      return config.plugins?.['my-plugin'] || {};
    } catch (error) {
      return {};
    }
  }
  return {};
}
```

## Built-in Plugins

The Zopio CLI comes with several built-in plugins:

### i18n-tools

Provides advanced internationalization tools:

- `zopio i18n-analyze`: Analyze translation coverage
- `zopio i18n-sync`: Synchronize translation keys across locales

For more information on these commands, see the [Internationalization](/cli/internationalization) documentation.
